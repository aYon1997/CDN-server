# ğŸŒ¿ å¤šåˆ†æ”¯ GitHub Pages éƒ¨ç½²æŒ‡å—

<div align="center">

**å®ç°ä¸åŒåˆ†æ”¯è‡ªåŠ¨éƒ¨ç½²åˆ°ä¸åŒè·¯å¾„çš„å®Œæ•´æ–¹æ¡ˆ**

[![GitHub Pages](https://img.shields.io/badge/GitHub-Pages-222?logo=github)](https://pages.github.com/)
[![Multi Branch](https://img.shields.io/badge/Multi-Branch-success)]()

[ğŸ¯ éƒ¨ç½²æ¶æ„](#-éƒ¨ç½²æ¶æ„) â€¢ [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ğŸ’¡ æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)

</div>

---

## ğŸ“– æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†æ ¹æ®ä¸åŒåˆ†æ”¯è‡ªåŠ¨éƒ¨ç½²åˆ°ä¸åŒè·¯å¾„çš„ GitHub Pages åŠŸèƒ½ã€‚æ¯ä¸ªåˆ†æ”¯éƒ½æœ‰ï¼š

- âœ… ç‹¬ç«‹çš„è®¿é—®åœ°å€
- âœ… ç‹¬ç‰¹çš„é¡µé¢å†…å®¹
- âœ… è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹
- âœ… å®Œå…¨éš”ç¦»çš„è¿è¡Œç¯å¢ƒ

## åˆ†æ”¯éƒ¨ç½²æ˜ å°„

| åˆ†æ”¯åç§° | éƒ¨ç½²åœ°å€ | é¡µé¢ç‰¹è‰² | ç”¨é€” |
|---------|----------|----------|------|
| `main` | https://ayon1997.github.io/CDN-server/ | è“è‰²ä¸»é¢˜ï¼Œç”Ÿäº§ç¯å¢ƒ | æ­£å¼å‘å¸ƒç‰ˆæœ¬ |
| `dev` | https://ayon1997.github.io/dev/CDN-server/ | æ©™è‰²ä¸»é¢˜ï¼Œå¼€å‘ç¯å¢ƒæ¨ªå¹… | å¼€å‘æµ‹è¯• |
| `dev2` | https://ayon1997.github.io/dev2/CDN-server/ | ç´«è‰²ä¸»é¢˜ï¼Œå®éªŒæ€§åŠŸèƒ½ | å®éªŒæ€§åŠŸèƒ½æµ‹è¯• |
| `staging` | https://ayon1997.github.io/staging/CDN-server/ | é»„è‰²ä¸»é¢˜ï¼Œé¢„å‘å¸ƒç¯å¢ƒ | é¢„å‘å¸ƒæµ‹è¯• |
| `production` | https://ayon1997.github.io/production/CDN-server/ | ç»¿è‰²ä¸»é¢˜ï¼Œç”Ÿäº§ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºåˆ†æ”¯

```bash
# åˆ›å»ºdev2åˆ†æ”¯
git checkout -b dev2

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push -u origin dev2
```

### 2. è‡ªåŠ¨éƒ¨ç½²

å½“æ‚¨å‘ä»»ä½•é…ç½®çš„åˆ†æ”¯æ¨é€ä»£ç æ—¶ï¼ŒGitHub Actionä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼š

```bash
# åœ¨dev2åˆ†æ”¯ä¸Šè¿›è¡Œä¿®æ”¹
echo "æ›´æ–°å†…å®¹" >> index-dev2.html
git add .
git commit -m "æ›´æ–°dev2ç¯å¢ƒå†…å®¹"
git push origin dev2
```

### 3. æŸ¥çœ‹éƒ¨ç½²ç»“æœ

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- https://ayon1997.github.io/dev2/CDN-server/

## æœ¬åœ°å¼€å‘

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æœ¬åœ°é¢„è§ˆ

```bash
# é¢„è§ˆä¸»é¡µé¢
npm run serve

# é¢„è§ˆdevç¯å¢ƒ
npm run serve:dev

# é¢„è§ˆdev2ç¯å¢ƒ
npm run serve:dev2

# é¢„è§ˆstagingç¯å¢ƒ
npm run serve:staging
```

## è‡ªå®šä¹‰åˆ†æ”¯é…ç½®

### æ·»åŠ æ–°åˆ†æ”¯

1. **åˆ›å»ºHTMLæ–‡ä»¶**ï¼šä¸ºæ–°åˆ†æ”¯åˆ›å»ºä¸“ç”¨çš„HTMLæ–‡ä»¶
   ```bash
   cp index-dev.html index-æ–°åˆ†æ”¯å.html
   ```

2. **ä¿®æ”¹GitHub Action**ï¼šåœ¨`.github/workflows/deploy.yaml`ä¸­æ·»åŠ æ–°çš„job
   ```yaml
   deploy-æ–°åˆ†æ”¯å:
     if: github.ref == 'refs/heads/æ–°åˆ†æ”¯å'
     runs-on: ubuntu-latest
     steps:
       # ... ç±»ä¼¼å…¶ä»–åˆ†æ”¯çš„é…ç½®
   ```

3. **æ›´æ–°package.json**ï¼šæ·»åŠ æ„å»ºå’ŒæœåŠ¡è„šæœ¬
   ```json
   {
     "scripts": {
       "build:æ–°åˆ†æ”¯å": "cross-env NODE_ENV=development BRANCH=æ–°åˆ†æ”¯å npm run build",
       "serve:æ–°åˆ†æ”¯å": "npx http-server . -p ç«¯å£å· -o /index-æ–°åˆ†æ”¯å.html"
     }
   }
   ```

### åˆ†æ”¯ç‰¹å®šçš„æ ·å¼ä¸»é¢˜

æ¯ä¸ªåˆ†æ”¯éƒ½æœ‰ç‹¬ç‰¹çš„è§†è§‰æ ‡è¯†ï¼š

- **Main**: é»˜è®¤è“è‰²ä¸»é¢˜
- **Dev**: æ©™è‰²ä¸»é¢˜ + å¼€å‘ç¯å¢ƒæ¨ªå¹…
- **Dev2**: ç´«è‰²ä¸»é¢˜ + å®éªŒæ€§åŠŸèƒ½æ ‡è¯†
- **Staging**: é»„è‰²ä¸»é¢˜ + é¢„å‘å¸ƒç¯å¢ƒæ ‡è¯†
- **Production**: ç»¿è‰²ä¸»é¢˜ + ç”Ÿäº§ç¯å¢ƒæ ‡è¯†

## å·¥ä½œæµç¨‹è¯´æ˜

### è‡ªåŠ¨éƒ¨ç½²æµç¨‹

1. **è§¦å‘æ¡ä»¶**ï¼šæ¨é€åˆ°æŒ‡å®šåˆ†æ”¯
2. **ç¯å¢ƒæ£€æµ‹**ï¼šGitHub Actionè¯†åˆ«åˆ†æ”¯åç§°
3. **æ„å»ºè¿‡ç¨‹**ï¼š
   - å®‰è£…ä¾èµ–
   - æ‰§è¡Œåˆ†æ”¯ç‰¹å®šçš„æ„å»ºè„šæœ¬
   - å¤åˆ¶å¯¹åº”çš„HTMLæ–‡ä»¶åˆ°distç›®å½•
4. **éƒ¨ç½²è¿‡ç¨‹**ï¼š
   - ä½¿ç”¨`peaceiris/actions-gh-pages@v3`
   - éƒ¨ç½²åˆ°`gh-pages`åˆ†æ”¯çš„å¯¹åº”å­ç›®å½•
   - ä¿æŒå…¶ä»–åˆ†æ”¯çš„å†…å®¹ä¸å˜

### åˆ†æ”¯éš”ç¦»æœºåˆ¶

- æ¯ä¸ªåˆ†æ”¯éƒ¨ç½²åˆ°ç‹¬ç«‹çš„å­ç›®å½•
- åˆ†æ”¯é—´å†…å®¹å®Œå…¨éš”ç¦»
- å¯ä»¥åŒæ—¶è®¿é—®æ‰€æœ‰ç¯å¢ƒ
- æ”¯æŒç‹¬ç«‹çš„é…ç½®å’Œæ ·å¼

## é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡

åœ¨GitHub Actionä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `NODE_ENV`: ç¯å¢ƒç±»å‹ (development/staging/production)
- `BRANCH_NAME`: å½“å‰åˆ†æ”¯åç§°
- `GITHUB_TOKEN`: GitHubè®¿é—®ä»¤ç‰Œ (è‡ªåŠ¨æä¾›)

### è‡ªå®šä¹‰åŸŸå

å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰åŸŸåï¼Œå¯ä»¥åœ¨GitHub Actionä¸­è®¾ç½®ï¼š

```yaml
- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./dist
    publish_branch: gh-pages
    cname: your-custom-domain.com  # è‡ªå®šä¹‰åŸŸå
```

### æ„å»ºä¼˜åŒ–

å¯¹äºå¤æ‚é¡¹ç›®ï¼Œå¯ä»¥æ·»åŠ æ›´å¤šæ„å»ºæ­¥éª¤ï¼š

```yaml
- name: Build project
  run: |
    # å®‰è£…ä¾èµ–
    npm ci
    
    # è¿è¡Œæµ‹è¯•
    npm test
    
    # æ„å»ºé¡¹ç›®
    npm run build:${{ env.BRANCH_NAME }}
    
    # ä¼˜åŒ–èµ„æº
    npm run optimize
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **éƒ¨ç½²å¤±è´¥**ï¼šæ£€æŸ¥GitHub Actionæ—¥å¿—
2. **é¡µé¢ä¸æ˜¾ç¤º**ï¼šç¡®è®¤GitHub Pagesè®¾ç½®æ­£ç¡®
3. **æ ·å¼é”™è¯¯**ï¼šæ£€æŸ¥HTMLæ–‡ä»¶ä¸­çš„CSSè·¯å¾„
4. **åˆ†æ”¯ä¸è§¦å‘**ï¼šç¡®è®¤åˆ†æ”¯ååœ¨`deploy.yaml`çš„è§¦å‘æ¡ä»¶ä¸­

### è°ƒè¯•æ–¹æ³•

```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
npm run build:dev2

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls -la dist/

# æœ¬åœ°é¢„è§ˆ
npm run serve:dev2
```

## æœ€ä½³å®è·µ

1. **åˆ†æ”¯å‘½å**ï¼šä½¿ç”¨æ¸…æ™°çš„åˆ†æ”¯å‘½åè§„èŒƒ
2. **å†…å®¹å·®å¼‚åŒ–**ï¼šä¸ºæ¯ä¸ªç¯å¢ƒæä¾›æ˜ç¡®çš„è§†è§‰æ ‡è¯†
3. **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤ä¸å†éœ€è¦çš„åˆ†æ”¯å’Œå¯¹åº”é…ç½®
4. **æ–‡æ¡£æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°éƒ¨ç½²åœ°å€å’Œè¯´æ˜

## ç¤ºä¾‹å·¥ä½œæµ

### å¼€å‘æ–°åŠŸèƒ½

```bash
# 1. åˆ›å»ºfeatureåˆ†æ”¯
git checkout -b feature/new-feature

# 2. å¼€å‘å’Œæµ‹è¯•
# ... ä»£ç ä¿®æ”¹ ...

# 3. åˆå¹¶åˆ°devåˆ†æ”¯æµ‹è¯•
git checkout dev
git merge feature/new-feature
git push origin dev

# 4. åœ¨dev2åˆ†æ”¯è¿›è¡Œå®éªŒæ€§æµ‹è¯•
git checkout dev2
git cherry-pick <commit-hash>
git push origin dev2

# 5. æµ‹è¯•é€šè¿‡ååˆå¹¶åˆ°main
git checkout main
git merge dev
git push origin main
```

è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­å¹¶è¡Œæµ‹è¯•åŒä¸€åŠŸèƒ½çš„ä¸åŒç‰ˆæœ¬äº†ï¼

## ğŸ“Š éƒ¨ç½²æµç¨‹å›¾

```mermaid
graph TB
    A[å¼€å‘æ–°åŠŸèƒ½] --> B[æ¨é€åˆ° feature åˆ†æ”¯]
    B --> C[åˆå¹¶åˆ° dev åˆ†æ”¯]
    C --> D{å¼€å‘æµ‹è¯•é€šè¿‡?}
    D -->|æ˜¯| E[åˆå¹¶åˆ° staging åˆ†æ”¯]
    D -->|å¦| A
    E --> F{é¢„å‘å¸ƒæµ‹è¯•é€šè¿‡?}
    F -->|æ˜¯| G[åˆå¹¶åˆ° production åˆ†æ”¯]
    F -->|å¦| A
    G --> H{ç”Ÿäº§éªŒè¯é€šè¿‡?}
    H -->|æ˜¯| I[åˆå¹¶åˆ° main åˆ†æ”¯]
    H -->|å¦| A
    I --> J[æ­£å¼å‘å¸ƒ ğŸ‰]
```

## ğŸ¨ ç¯å¢ƒä¸»é¢˜é…è‰²

| ç¯å¢ƒ | ä¸»è‰²è°ƒ | ç”¨é€” |
|------|--------|------|
| Main | ğŸ”µ è“è‰² `#3498db` | ç”Ÿäº§ç¯å¢ƒï¼Œç¨³å®šå¯é  |
| Dev | ğŸŸ  æ©™è‰² `#e67e22` | å¼€å‘ç¯å¢ƒï¼Œå¿«é€Ÿè¿­ä»£ |
| Dev2 | ğŸŸ£ ç´«è‰² `#9b59b6` | å®éªŒç¯å¢ƒï¼Œæ–°åŠŸèƒ½æµ‹è¯• |
| Staging | ğŸŸ¡ é»„è‰² `#f39c12` | é¢„å‘å¸ƒï¼Œæœ€ç»ˆéªŒè¯ |
| Production | ğŸŸ¢ ç»¿è‰² `#27ae60` | ç”Ÿäº§å°±ç»ªï¼Œéšæ—¶ä¸Šçº¿ |

## ğŸ”— ç›¸å…³èµ„æº

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [GitHub Pages æ–‡æ¡£](https://docs.github.com/en/pages)
- [peaceiris/actions-gh-pages](https://github.com/peaceiris/actions-gh-pages)

---

<div align="center">

**ğŸ‰ ç°åœ¨ä½ å·²ç»æŒæ¡äº†å¤šåˆ†æ”¯éƒ¨ç½²çš„æ‰€æœ‰æŠ€å·§ï¼**

[â¬†ï¸ è¿”å›é¡¶éƒ¨](#-å¤šåˆ†æ”¯-github-pages-éƒ¨ç½²æŒ‡å—) â€¢ [ğŸ“– è¿”å›ä¸»æ–‡æ¡£](./README.md)

Made with â¤ï¸ by èˆ¹æ–°ç‰ˆæœ¬é˜¿å­

</div> 